oc new-project cicd-dev
oc new-app jenkins-persistent -p ENABLE_OAUTH=false -e JENKINS_PASSWORD=openshiftpipelines -n cicd-dev		

oc adm pod-network make-projects-global cicd-dev


oc new-project tasks-build
oc new-project tasks-dev
oc new-project tasks-test
oc new-project tasks-prod

oc policy add-role-to-user edit system:serviceaccount:tasks-build:jenkins -n tasks-build
oc policy add-role-to-user edit system:serviceaccount:tasks-build:jenkins -n tasks-dev
oc policy add-role-to-user edit system:serviceaccount:tasks-build:jenkins -n tasks-test
oc policy add-role-to-user edit system:serviceaccount:tasks-build:jenkins -n tasks-build

oc new-app jboss-eap70-openshift:1.6~https://github.com/mschreie/openshift-tasks -n tasks-build



oc policy add-role-to-group system:image-puller system:serviceaccounts:tasks-prod -n tasks-build
oc policy add-role-to-group system:image-puller system:serviceaccounts:tasks-test -n tasks-build
oc policy add-role-to-group system:image-puller system:serviceaccounts:tasks-dev -n tasks-build

oc tag openshift-tasks:latest openshift-tasks:devready -n tasks-build
oc tag openshift-tasks:devready openshift-tasks:testready -n tasks-build
oc tag openshift-tasks:testready openshift-tasks:prodready -n tasks-build



oc new-app tasks-build/openshift-tasks:devready -n tasks-dev
oc new-app tasks-build/openshift-tasks:testready -n tasks-test
oc new-app tasks-build/openshift-tasks:prodready -n tasks-prod


oc expose svc openshift-tasks -n tasks-build
oc expose svc openshift-tasks -n tasks-dev
oc expose svc openshift-tasks -n tasks-test
oc expose svc openshift-tasks -n tasks-prod


oc get dc openshift-tasks -o yaml -n tasks-build | sed 's/automatic: true/automatic: false/g' | oc replace -f -
oc get dc openshift-tasks -o yaml -n tasks-dev | sed 's/automatic: true/automatic: false/g' | oc replace -f -
oc get dc openshift-tasks -o yaml -n tasks-test | sed 's/automatic: true/automatic: false/g' | oc replace -f -
oc get dc openshift-tasks -o yaml -n tasks-prod | sed 's/automatic: true/automatic: false/g' | oc replace -f -
